import { exec } from 'child_process';
/** Todo, run the commands */
export const makeCommandWithArgsOptsAndFlags = (cmd) => (args, opts, flags) => {
    let command = cmd;
    command += args.length > 0 ? ' ' + args.join(' ') : '';
    // prettier-ignore
    command += opts ? Object.entries(opts).reduce((acc, [opt, val]) => {
        if (val) {
            acc += ` --${opt} ${val}`;
        }
        return acc;
    }, '') : '';
    // prettier-ignore
    command += flags ? Object.entries(flags).reduce((acc, [flag, on]) => {
        if (flag && on) {
            acc += ' ' + flag;
        }
        return acc;
    }, '') : '';
    return new Promise((resolve, reject) => {
        exec(command, (error, stdout, stderr) => {
            if (error) {
                reject(error);
            }
            else if (stderr) {
                reject(stderr);
            }
            else {
                resolve(stdout);
            }
        });
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWFuZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9jb21tYW5kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFFcEMsNkJBQTZCO0FBQzdCLE1BQU0sQ0FBQyxNQUFNLCtCQUErQixHQUFHLENBQUMsR0FBVyxFQUFFLEVBQUUsQ0FBQyxDQUMvRCxJQUF3QyxFQUN4QyxJQUFzQyxFQUN0QyxLQUErQixFQUNaLEVBQUU7SUFDckIsSUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFBO0lBQ2pCLE9BQU8sSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtJQUV0RCxrQkFBa0I7SUFDbEIsT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRTtRQUN6RSxJQUFLLEdBQUcsRUFBRztZQUNWLEdBQUcsSUFBSSxNQUFNLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQTtTQUN6QjtRQUNELE9BQU8sR0FBRyxDQUFBO0lBQ1gsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7SUFFWCxrQkFBa0I7SUFDbEIsT0FBTyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUMzRSxJQUFJLElBQUksSUFBSSxFQUFFLEVBQUU7WUFDZixHQUFHLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQTtTQUNqQjtRQUNELE9BQU8sR0FBRyxDQUFBO0lBQ1gsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7SUFFWCxPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1FBQ3RDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxFQUFFO1lBQ3ZDLElBQUksS0FBSyxFQUFFO2dCQUNWLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQTthQUNiO2lCQUFNLElBQUksTUFBTSxFQUFFO2dCQUNsQixNQUFNLENBQUMsTUFBTSxDQUFDLENBQUE7YUFDZDtpQkFBTTtnQkFDTixPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7YUFDZjtRQUNGLENBQUMsQ0FBQyxDQUFBO0lBQ0gsQ0FBQyxDQUFDLENBQUE7QUFDSCxDQUFDLENBQUEifQ==