import { exec } from 'child_process';
/** Todo, run the commands */
export const makeCommandWithArgsOptsAndFlags = (cmd, sub) => (args, opts, flags) => {
    let command = `cardano-cli ${cmd} ${sub}`;
    // prettier-ignore
    command += args.length > 0 ? ' ' + args.filter(arg => arg !== undefined).map((arg) => {
        if (typeof arg === 'string' && arg.match(/\s/)) {
            return `"${arg}"`;
        }
        else {
            return arg;
        }
    }).join(' ') : '';
    // prettier-ignore
    command += opts ? Object.entries(opts).reduce((acc, [opt, val]) => {
        if (val) {
            if (typeof val === 'string' && val.match(/\s/)) {
                val = `"${val}"`;
            }
            acc += ` --${opt} ${val}`;
        }
        return acc;
    }, '') : '';
    // prettier-ignore
    command += flags ? Object.entries(flags).reduce((acc, [flag, on]) => {
        if (flag && on) {
            acc += ` --${flag}`;
        }
        return acc;
    }, '') : '';
    console.log(`[RUN]: ${command}`);
    return new Promise((resolve, reject) => {
        exec(command, (error, stdout, stderr) => {
            if (error) {
                reject(error);
            }
            else if (stderr) {
                reject(stderr);
            }
            else {
                resolve(stdout);
            }
        });
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWFuZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9jb21tYW5kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFLcEMsNkJBQTZCO0FBQzdCLE1BQU0sQ0FBQyxNQUFNLCtCQUErQixHQUFHLENBQzlDLEdBQU0sRUFDTixHQUFzQixFQUNyQixFQUFFLENBQUMsQ0FDSixJQUF3QyxFQUN4QyxJQUFzQyxFQUN0QyxLQUErQixFQUNaLEVBQUU7SUFDckIsSUFBSSxPQUFPLEdBQUcsZUFBZSxHQUFHLElBQUksR0FBRyxFQUFFLENBQUE7SUFFekMsa0JBQWtCO0lBQ2xCLE9BQU8sSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssU0FBUyxDQUFFLENBQUMsR0FBRyxDQUFFLENBQUUsR0FBRyxFQUFHLEVBQUU7UUFDekYsSUFBSyxPQUFPLEdBQUcsS0FBSyxRQUFRLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRztZQUNqRCxPQUFPLElBQUksR0FBRyxHQUFHLENBQUE7U0FDakI7YUFBTTtZQUNOLE9BQU8sR0FBRyxDQUFBO1NBQ1Y7SUFDRixDQUFDLENBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtJQUVsQixrQkFBa0I7SUFDbEIsT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRTtRQUN6RSxJQUFLLEdBQUcsRUFBRztZQUNWLElBQUssT0FBTyxHQUFHLEtBQUssUUFBUSxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUUsSUFBSSxDQUFFLEVBQUc7Z0JBQ25ELEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFBO2FBQ2hCO1lBQ0QsR0FBRyxJQUFJLE1BQU0sR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFBO1NBQ3pCO1FBQ0QsT0FBTyxHQUFHLENBQUE7SUFDWCxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtJQUVYLGtCQUFrQjtJQUNsQixPQUFPLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzNFLElBQUksSUFBSSxJQUFJLEVBQUUsRUFBRTtZQUNmLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFBO1NBQ25CO1FBQ0QsT0FBTyxHQUFHLENBQUE7SUFDWCxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtJQUVYLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxPQUFPLEVBQUUsQ0FBQyxDQUFBO0lBRWhDLE9BQU8sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7UUFDdEMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLEVBQUU7WUFDdkMsSUFBSSxLQUFLLEVBQUU7Z0JBQ1YsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFBO2FBQ2I7aUJBQU0sSUFBSSxNQUFNLEVBQUU7Z0JBQ2xCLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQTthQUNkO2lCQUFNO2dCQUNOLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQTthQUNmO1FBQ0YsQ0FBQyxDQUFDLENBQUE7SUFDSCxDQUFDLENBQUMsQ0FBQTtBQUNILENBQUMsQ0FBQSJ9